{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Nos Jeux - Booking Game</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>

    <div class="container">

        <div class="back-home">
            <a href="{% url 'tables_app:home' %}" class="btn-home">Retour √† l'accueil</a>
        </div>

        <h1>üé≤ Nos Jeux Disponibles</h1>

        <!-- Formulaire de filtre -->
        <form method="get" action="{% url 'tables_app:games' %}" class="filter-form">
            <label for="category">Cat√©gorie :</label>
            <select name="category" id="category">
                <option value="">-- Toutes --</option>
                {% for category in categories %}
                    <option value="{{ category }}" {% if request.GET.category == category %}selected{% endif %}>{{ category }}</option>
                {% endfor %}
            </select>

            <label for="players">Nombre minimum de joueurs :</label>
            <select name="players" id="players">
                <option value="">-- Tous --</option>
                {% for nb in player_options %}
                    <option value="{{ nb }}" {% if request.GET.players == nb|stringformat:"s" %}selected{% endif %}>{{ nb }}</option>
                {% endfor %}
            </select>

            <button type="submit">Filtrer</button>
        </form>

        <hr>

        <!-- Liste des jeux -->
        <div class="games-list">
            {% if games %}
                <ul>
                    {% for game in games %}
                        <li class="game-card">
                            <h3>{{ game.name_game }}</h3>
                            <p><strong>Cat√©gorie :</strong> {{ game.category_game }}</p>
                            <p><strong>Joueurs :</strong> {{ game.nb_player_min_game }} - {{ game.nb_player_max_game }}</p>
                            {% if game.description %}
                                <p>{{ game.description }}</p>
                            {% endif %}
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p>Aucun jeu ne correspond √† vos crit√®res.</p>
            {% endif %}
        </div>
    </div>
</body>
</html>






.games-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: 20px;
}

.game-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    text-decoration: none;
    color: #333;
    border: 1px solid #ddd;
    border-radius: 8px;
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.game-card img {
    width: 100%;
    height: 150px;
    object-fit: cover;
}

.game-card h3 {
    margin: 10px 0;
    text-align: center;
}

.game-card:hover {
    transform: scale(1.05);
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}




# --- Nos jeux disponibles ---

def games(request):
    # R√©cup√©rer les filtres GET
    category = request.GET.get("category")
    players = request.GET.get("players")

    # Base queryset
    games = Game.objects.all()

    # Appliquer les filtres
    if category:
        games = games.filter(category_game=category)
    if players:
        games = games.filter(nb_player_min_game__lte=players)

    # Donn√©es pour le formulaire
    categories = Game.objects.values_list("category_game", flat=True).distinct()
    player_options = Game.objects.values_list("nb_player_min_game", flat=True).distinct().order_by("nb_player_min_game")

    return render(request, "tables_app/game.html", {
        "games": games,
        "categories": categories,
        "player_options": player_options,
    })

def game_detail(request, game_id):
    game = get_object_or_404(Game, id=game_id)
    return render(request, "tables_app/game_detail.html", {"game": game})